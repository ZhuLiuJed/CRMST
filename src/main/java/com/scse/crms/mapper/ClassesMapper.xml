<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.scse.crms.mapper.ClassesMapper">
<!--   <resultMap type="com.scse.crms.vo.ClassesVo" id="seatTable">

  </resultMap> -->
  <select id="selectSchedule" resultType="com.scse.crms.vo.ClassesVo">
    SELECT classes.cid, classes.classroom, classes_student.sid FROM classes_student,classes 
      WHERE classes_student.classid=classes.id  AND classes_student.sid=1
  </select>
  <select id="selectSeat" resultType="com.scse.crms.vo.SeatTable">
  	SELECT classes_student.sid, student.name as sname,classes.cid, classes.classroom, classes_student.seat, score.usual_performance 
  	FROM student,classes_student,classes,score
	WHERE classes_student.classid=classes.id  <!-- AND classes_student.classid=1 -->
	AND score.sid=classes_student.sid=student.id AND score.sid=classes.cid
  </select>
  <select id="selectCountWithSeat" parameterType="String" resultType="int">
    SELECT COUNT(*) FROM classes_student WHERE seat=#{seat}
  </select>
  <update id="udateSeat" parameterType="com.scse.crms.vo.SeatTable">
    UPDATE classes_student SET seat=#{seat} WHERE sid=#{sid} AND classid=#{classid}
  </update>
  <update id="removeSeat" parameterType="String">
    UPDATE classes_student SET seat=null WHEREseat=#{seat}
  </update>
</mapper>